<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
  <link rel="stylesheet" href="../css/style.css">
  <title>Submatrix Sum in O(1) | Tutorials</title>

  <link rel='shortcut icon' href='../images/favicon.ico' type='image/x-icon' />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono&display=swap" rel="stylesheet">

  <style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=mW_CIZvkcW1i7Mw9mVo5P1H3VBSNBU7eRH25QrkZQSALcGubaB9yiiHAdd9ZEf4N');ul.lst-kix_owzttj1rbxkx-7{list-style-type:none}ul.lst-kix_owzttj1rbxkx-8{list-style-type:none}ul.lst-kix_owzttj1rbxkx-5{list-style-type:none}ul.lst-kix_owzttj1rbxkx-6{list-style-type:none}.lst-kix_neiex2moh3dh-2>li:before{content:"\0025a0  "}.lst-kix_neiex2moh3dh-3>li:before{content:"\0025cf  "}.lst-kix_neiex2moh3dh-4>li:before{content:"\0025cb  "}.lst-kix_neiex2moh3dh-1>li:before{content:"\0025cb  "}.lst-kix_neiex2moh3dh-0>li:before{content:"\0025cf  "}ul.lst-kix_n5uhzslew759-0{list-style-type:none}ul.lst-kix_n5uhzslew759-2{list-style-type:none}ul.lst-kix_n5uhzslew759-1{list-style-type:none}ul.lst-kix_owzttj1rbxkx-0{list-style-type:none}ul.lst-kix_n5uhzslew759-4{list-style-type:none}ul.lst-kix_n5uhzslew759-3{list-style-type:none}ul.lst-kix_n5uhzslew759-6{list-style-type:none}ul.lst-kix_owzttj1rbxkx-3{list-style-type:none}ul.lst-kix_n5uhzslew759-5{list-style-type:none}ul.lst-kix_owzttj1rbxkx-4{list-style-type:none}ul.lst-kix_n5uhzslew759-8{list-style-type:none}ul.lst-kix_owzttj1rbxkx-1{list-style-type:none}ul.lst-kix_n5uhzslew759-7{list-style-type:none}ul.lst-kix_owzttj1rbxkx-2{list-style-type:none}.lst-kix_vwd2mv7iyrt2-1>li:before{content:"\0025cb  "}.lst-kix_vwd2mv7iyrt2-3>li:before{content:"\0025cf  "}.lst-kix_g6t4hrpx5fu6-4>li:before{content:"\0025cb  "}.lst-kix_g6t4hrpx5fu6-6>li:before{content:"\0025cf  "}.lst-kix_vwd2mv7iyrt2-2>li:before{content:"\0025a0  "}.lst-kix_g6t4hrpx5fu6-3>li:before{content:"\0025cf  "}.lst-kix_g6t4hrpx5fu6-7>li:before{content:"\0025cb  "}.lst-kix_n5uhzslew759-0>li:before{content:"\0025cf  "}.lst-kix_n5uhzslew759-1>li:before{content:"\0025cb  "}.lst-kix_vwd2mv7iyrt2-5>li:before{content:"\0025a0  "}.lst-kix_n5uhzslew759-2>li:before{content:"\0025a0  "}.lst-kix_vwd2mv7iyrt2-4>li:before{content:"\0025cb  "}.lst-kix_g6t4hrpx5fu6-5>li:before{content:"\0025a0  "}.lst-kix_n5uhzslew759-4>li:before{content:"\0025cb  "}.lst-kix_n5uhzslew759-3>li:before{content:"\0025cf  "}.lst-kix_n5uhzslew759-5>li:before{content:"\0025a0  "}ul.lst-kix_neiex2moh3dh-1{list-style-type:none}ul.lst-kix_neiex2moh3dh-2{list-style-type:none}ul.lst-kix_neiex2moh3dh-0{list-style-type:none}.lst-kix_n5uhzslew759-7>li:before{content:"\0025cb  "}.lst-kix_g6t4hrpx5fu6-8>li:before{content:"\0025a0  "}.lst-kix_myv07ux4t6p6-8>li:before{content:"\0025a0  "}.lst-kix_n5uhzslew759-6>li:before{content:"\0025cf  "}.lst-kix_vwd2mv7iyrt2-0>li:before{content:"\0025cf  "}.lst-kix_n5uhzslew759-8>li:before{content:"\0025a0  "}ul.lst-kix_neiex2moh3dh-5{list-style-type:none}ul.lst-kix_neiex2moh3dh-6{list-style-type:none}ul.lst-kix_neiex2moh3dh-3{list-style-type:none}ul.lst-kix_neiex2moh3dh-4{list-style-type:none}ul.lst-kix_neiex2moh3dh-7{list-style-type:none}ul.lst-kix_neiex2moh3dh-8{list-style-type:none}.lst-kix_g6t4hrpx5fu6-0>li:before{content:"\0025cf  "}.lst-kix_vwd2mv7iyrt2-6>li:before{content:"\0025cf  "}.lst-kix_vwd2mv7iyrt2-7>li:before{content:"\0025cb  "}.lst-kix_g6t4hrpx5fu6-2>li:before{content:"\0025a0  "}.lst-kix_vwd2mv7iyrt2-8>li:before{content:"\0025a0  "}.lst-kix_g6t4hrpx5fu6-1>li:before{content:"\0025cb  "}ul.lst-kix_g6t4hrpx5fu6-4{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-5{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-2{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-3{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-0{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-1{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-8{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-6{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-7{list-style-type:none}.lst-kix_owzttj1rbxkx-3>li:before{content:"\0025cf  "}.lst-kix_owzttj1rbxkx-1>li:before{content:"\0025cb  "}.lst-kix_owzttj1rbxkx-2>li:before{content:"\0025a0  "}.lst-kix_owzttj1rbxkx-0>li:before{content:"\0025cf  "}.lst-kix_myv07ux4t6p6-7>li:before{content:"\0025cb  "}.lst-kix_myv07ux4t6p6-6>li:before{content:"\0025cf  "}.lst-kix_myv07ux4t6p6-5>li:before{content:"\0025a0  "}.lst-kix_myv07ux4t6p6-2>li:before{content:"\0025a0  "}.lst-kix_myv07ux4t6p6-4>li:before{content:"\0025cb  "}.lst-kix_myv07ux4t6p6-3>li:before{content:"\0025cf  "}.lst-kix_myv07ux4t6p6-0>li:before{content:"\0025cf  "}.lst-kix_myv07ux4t6p6-1>li:before{content:"\0025cb  "}ul.lst-kix_vwd2mv7iyrt2-8{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-0{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-1{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-2{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-3{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-4{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-5{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-6{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-7{list-style-type:none}ul.lst-kix_myv07ux4t6p6-7{list-style-type:none}.lst-kix_neiex2moh3dh-5>li:before{content:"\0025a0  "}.lst-kix_neiex2moh3dh-6>li:before{content:"\0025cf  "}ul.lst-kix_myv07ux4t6p6-8{list-style-type:none}ul.lst-kix_myv07ux4t6p6-5{list-style-type:none}.lst-kix_owzttj1rbxkx-4>li:before{content:"\0025cb  "}ul.lst-kix_myv07ux4t6p6-6{list-style-type:none}ul.lst-kix_myv07ux4t6p6-3{list-style-type:none}.lst-kix_owzttj1rbxkx-5>li:before{content:"\0025a0  "}ul.lst-kix_myv07ux4t6p6-4{list-style-type:none}ul.lst-kix_myv07ux4t6p6-1{list-style-type:none}ul.lst-kix_myv07ux4t6p6-2{list-style-type:none}.lst-kix_owzttj1rbxkx-7>li:before{content:"\0025cb  "}ul.lst-kix_myv07ux4t6p6-0{list-style-type:none}.lst-kix_owzttj1rbxkx-6>li:before{content:"\0025cf  "}.lst-kix_owzttj1rbxkx-8>li:before{content:"\0025a0  "}.lst-kix_neiex2moh3dh-7>li:before{content:"\0025cb  "}.lst-kix_neiex2moh3dh-8>li:before{content:"\0025a0  "}ol{margin:0;padding:0}table td,table th{padding:0}.c2{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#efefef;border-left-style:solid;border-bottom-width:1pt;width:64.5pt;border-top-color:#000000;border-bottom-style:solid}.c14{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#b6d7a8;border-left-style:solid;border-bottom-width:1pt;width:63pt;border-top-color:#000000;border-bottom-style:solid}.c12{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:451.3pt;border-top-color:#000000;border-bottom-style:solid}.c9{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:64.5pt;border-top-color:#000000;border-bottom-style:solid}.c8{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:64.8pt;border-top-color:#000000;border-bottom-style:solid}.c28{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:63pt;border-top-color:#000000;border-bottom-style:solid}.c35{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c32{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Ubuntu";font-style:normal}.c4{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left;height:11pt}.c18{background-color:#333333;font-size:12pt;font-family:"Ubuntu Mono";color:#fcc28c;font-weight:400}.c13{background-color:#333333;font-size:12pt;font-family:"Ubuntu Mono";color:#ffffff;font-weight:400}.c17{background-color:#333333;font-size:12pt;font-family:"Ubuntu Mono";color:#d36363;font-weight:400}.c11{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c19{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c33{color:#434343;text-decoration:none;vertical-align:baseline;font-style:normal}.c34{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c1{border-spacing:0;border-collapse:collapse;margin-right:auto}.c10{font-size:12pt;font-family:"Ubuntu";font-weight:400}.c15{font-size:12pt;font-family:"Ubuntu";font-weight:700}.c30{font-size:13pt;font-family:"Ubuntu";font-weight:700}.c36{font-weight:700;font-size:14pt;font-family:"Ubuntu"}.c29{font-size:15pt;font-family:"Ubuntu";font-weight:700}.c20{font-weight:400;font-size:12pt;font-family:"Ubuntu Mono"}.c31{background-color:#ffffff;max-width:451.3pt;padding:72pt 72pt 72pt 72pt}.c22{padding:0;margin:0}.c24{background-color:#333333;color:#ffffaa}.c27{background-color:#333333;color:#fc9b9b}.c38{background-color:#ffffff}.c25{padding-left:0pt}.c26{background-color:#b6d7a8}.c16{height:0pt}.c23{background-color:#f4cccc}.c37{vertical-align:super}.c6{margin-left:36pt}.c5{height:11pt}.c21{background-color:#f6b26b}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style>
</head>
<nav class="navbar navbar-dark bg-dark navbar-expand-lg">
  <a class="navbar-brand" href="./index.html">Md. Emrul Chowdhury</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
    aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarText">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="../index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../competitive-programming-profile.html">Competitive Programming Profile</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../problem-setting-profile.html">Problem Setting Profile</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../career-background.html">Career Background</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../tools/index.html">Tools</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="#">Tutorials</a>
      </li>
    </ul>
  </div>
</nav>

<body style="position: relative; min-height: 100vh">

  <div class="container" style="margin-top: 20px; padding-bottom: 150px">
    <h3 style="font-family: Ubuntu; font-size: 28px; font-weight: bold;">Submatrix Sum in O(1)</h3>
    <p class="c4"><span class="c0">In this tutorial, I&rsquo;m going to describe a problem and a simple solution to solve this to learn two dimensional cumulative sums.</span></p><h2 class="c35" id="h.4sof0d90jp2q"><span class="c29">Problem</span></h2><p class="c4"><span class="c10">You have a 2D matrix </span><span class="c15">mat</span><span class="c0">&nbsp;having n rows and m columns. You have some assigned numbers in every cell.</span></p><p class="c4 c5"><span class="c0"></span></p><a id="t.c36c8fcb263f51bf56d9c777d866004d9569673c"></a><a id="t.0"></a><table class="c1"><tbody><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 1</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">5</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">1</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">16</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">13</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 2</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">2</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">13</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">9</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">11</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 3</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">10</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">11</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">17</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">18</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 5</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">14</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c19 c15">mat</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 1</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 2</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 3</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 4</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 5</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 6</span></p></td></tr></tbody></table><p class="c4 c5"><span class="c0"></span></p><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c0">You need to do some queries, in every queries you need to print the sum of the submatrix. You will be given the position of lower left cell and upper right cell of the matrix. Example, we need to find the sum of sub-matrix having cells (2, 3) and (4, 5).</span></p><p class="c4 c5"><span class="c0"></span></p><a id="t.c36c8fcb263f51bf56d9c777d866004d9569673c"></a><a id="t.1"></a><table class="c1"><tbody><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 1</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">5</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">1</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">16</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">13</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 2</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">2</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">13</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">9</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">11</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 3</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">10</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">11</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">17</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">4</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">18</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 5</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">14</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c19 c15">mat</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 1</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 2</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 3</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 4</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 5</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 6</span></p></td></tr></tbody></table><p class="c4 c5"><span class="c0"></span></p><h2 class="c35" id="h.2xh8i0lvwitw"><span class="c19 c29">Solution </span></h2><h3 class="c32" id="h.bcexm7dzdzdn"><span class="c33 c36">Naive approach</span></h3><p class="c4"><span class="c0">Let&rsquo;s solve this problem naively first. We can run a simple nested loop to find the sum. Like this:</span></p><a id="t.abad8cdb722a66f39efe154818e3eb9f2a68d7f7"></a><a id="t.2"></a><table class="c1"><tbody><tr class="c16"><td class="c12" colspan="1" rowspan="1"><p class="c34"><span class="c18">int</span><span class="c13">&nbsp;</span><span class="c20 c24">sum</span><span class="c13">(</span><span class="c18">int</span><span class="c13">&nbsp;x1, </span><span class="c18">int</span><span class="c13">&nbsp;y1, </span><span class="c18">int</span><span class="c13">&nbsp;x2, </span><span class="c18">int</span><span class="c13">&nbsp;y2) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">int</span><span class="c13">&nbsp;sum = </span><span class="c17">0</span><span class="c13">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">for</span><span class="c13">&nbsp;(</span><span class="c18">int</span><span class="c13">&nbsp;i = x1; i &lt;= x2; i++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">for</span><span class="c13">&nbsp;(</span><span class="c18">int</span><span class="c13">&nbsp;j = y1; j &lt;= y2; j++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum += mat[i][j];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">return</span><span class="c13">&nbsp;sum;<br>}</span></p></td></tr></tbody></table><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c10">But the complexity of this code is O(n</span><span class="c10 c37">2</span><span class="c0">). This code will easily fail for higher constraints.<br></span></p><h3 class="c32" id="h.xteeemehx0kw"><span class="c30 c33">Efficient Approach</span></h3><p class="c4"><span class="c10">Let&rsquo;s solve this problem efficiently. <br><br>Let&rsquo;s store the cumulative sum of the matrix. We will store the cumulative in such a way that the </span><span class="c15">cell(i, j) will have cumulative sum of the submatrix having lower left cell(1, 1) and upper right cell(i, j)</span><span class="c10">. How will we do that?<br><br>Let&rsquo;s have another 2D matrix </span><span class="c15">csum </span><span class="c10">for storing the cumulative sum of the matrix </span><span class="c15">mat</span><span class="c10">.<br>Then </span><span class="c15">csum[1][1]</span><span class="c10">&nbsp;will be equal to</span><span class="c15">&nbsp;mat[1][1] </span><span class="c10">as </span><span class="c15">cell(1,1)</span><span class="c10">&nbsp;is the only cell of the submatrix having lower left </span><span class="c15">cell(1, 1)</span><span class="c10">&nbsp;and upper right </span><span class="c15">cell(1, 1)</span><span class="c0">. </span></p><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c10">So, </span><span class="c15">csum[1][1] = mat[1][1] = 3</span><span class="c0">.</span></p><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c15">csum[1][2]</span><span class="c10">&nbsp;will have the value equal to </span><span class="c15">mat[1][2] + csum[1][1]</span><span class="c10">&nbsp;as the cumulative sum upto </span><span class="c15">cell(1, 2)</span><span class="c10">&nbsp;will have the sum of every cells of the submatrix having lower left </span><span class="c15">cell(1, 1)</span><span class="c10">&nbsp;and upper right </span><span class="c15">cell(1, 2)</span><span class="c10">. So that, by adding </span><span class="c15">csum[1][1]</span><span class="c10">&nbsp;with </span><span class="c15">mat[1][2],</span><span class="c10">&nbsp;we will get </span><span class="c15">csum[1][2]</span><span class="c10">&nbsp;which is the cumulative sum of </span><span class="c15">cell(1, 1)</span><span class="c10">&nbsp;and </span><span class="c15">cell(1, 2)</span><span class="c10">.<br><br>So, </span><span class="c15">csum[1][2] = csum[1][1] + mat[1][2] = 3 + 5 = 8</span><span class="c0">.</span></p><p class="c4"><span class="c10">Similarly </span><span class="c15">csum[1][3] = csum[1][2] + mar[1][3] = 8 + 1 = 9</span><span class="c0">&nbsp;and so on. By doing the same for the other cells of row 1, we will get the cumulative sum of raw 1.</span></p><p class="c4 c5"><span class="c0"></span></p><a id="t.b77280bf6642e327c90d8dae4ff0cf33df178e17"></a><a id="t.3"></a><table class="c1"><tbody><tr class="c16"><td class="c9 c38" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 1</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c11"><span class="c0">9</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c11"><span class="c0">25</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c11"><span class="c0">33</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c11"><span class="c0">46</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 2</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 3</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 5</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c3"><span class="c0"></span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c19 c15">csum</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 1</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 2</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 3</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 4</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 5</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 6</span></p></td></tr></tbody></table><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c10">Now for the </span><span class="c15">cell(2, 1)</span><span class="c10">. The </span><span class="c15">csum[2][1]</span><span class="c0">&nbsp;will be the sum of csum[1][1] and mat[2][1].</span></p><p class="c4"><span class="c10">So, </span><span class="c15">csum[2][1] = csum[1][1] + mat[2][1] = 3 + 12 = 15</span><span class="c0">.</span></p><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c10">Here comes a bit complex calculation. For the </span><span class="c15">cell(2, 2)</span><span class="c10">, </span><span class="c15">csum[2][2] </span><span class="c10">should contain the sum of those cells of </span><span class="c15">mat </span><span class="c10">matrix: </span><span class="c15">(1, 1), (1, 2) (2, 1)</span><span class="c10">&nbsp;and </span><span class="c15">(2, 2)</span><span class="c0">.</span></p><p class="c4 c5"><span class="c0"></span></p><ul class="c22 lst-kix_g6t4hrpx5fu6-0 start"><li class="c4 c25 c6"><span class="c10">Sum of </span><span class="c15">cell(2, 2)</span><span class="c10">&nbsp;is </span><span class="c19 c15">mat[2][2]</span></li><li class="c4 c25 c6"><span class="c10">We can get the sum of </span><span class="c15">cell(1, 1)</span><span class="c10">&nbsp;and </span><span class="c15">cell(1, 2)</span><span class="c10">&nbsp;from </span><span class="c15">csum[1][2]</span><span class="c0">.</span></li><li class="c4 c25 c6"><span class="c10">And the sum of </span><span class="c15">cell(1, 1)</span><span class="c10">&nbsp;and </span><span class="c15">cell(2, 1)</span><span class="c10">&nbsp;from </span><span class="c15">csum[2][1]</span><span class="c0">.</span></li><li class="c4 c25 c6"><span class="c10">As we can see that </span><span class="c15">cell(1, 1)</span><span class="c0">&nbsp;is counted twice, we can subtract csum[1][1] so that it will be counted only once.</span></li></ul><p class="c4"><span class="c10">So finally, </span><span class="c19 c15">csum[2][2] = mat[2][2] + csum[1][2] + csum[2][1] - csum[1][1] = 2 + 8 + 15 - 3 = 22</span></p><p class="c4 c5"><span class="c19 c15"></span></p><p class="c4"><span class="c10">We caught the pattern! We will store the cumulative sum for </span><span class="c15">mat </span><span class="c0">matrix as following:</span></p><p class="c4"><span class="c19 c30">csum[i][j] = mat[i][j] + csum[i - 1][j] + csum[i][j - 1] - csum[i - 1][j - 1]</span></p><p class="c4 c5"><span class="c19 c15"></span></p><p class="c4"><span class="c0">The code for calculating cumulative sum is following:</span></p><p class="c4 c5"><span class="c0"></span></p><a id="t.1d2ed3d204a4be59e72052c9dac64fdf7cd27f40"></a><a id="t.4"></a><table class="c1"><tbody><tr class="c16"><td class="c12" colspan="1" rowspan="1"><p class="c34"><span class="c18">void</span><span class="c13">&nbsp;</span><span class="c20 c24">calc</span><span class="c13">(</span><span class="c18">int</span><span class="c13">&nbsp;n, </span><span class="c18">int</span><span class="c13">&nbsp;m) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">for</span><span class="c13">&nbsp;(</span><span class="c18">int</span><span class="c13">&nbsp;i = </span><span class="c17">1</span><span class="c13">; i &lt;= n; i++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">for</span><span class="c13">&nbsp;(</span><span class="c18">int</span><span class="c13">&nbsp;j = </span><span class="c17">1</span><span class="c13">; j &lt;= m; j++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;csum[i][j] = mat[i][j] + csum[i - </span><span class="c17">1</span><span class="c13">][j] + csum[i][j - </span><span class="c17">1</span><span class="c13">] - csum[i - </span><span class="c17">1</span><span class="c13">][j - </span><span class="c17">1</span><span class="c13">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}</span></p></td></tr></tbody></table><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c0">The final cumulative array will look like as following:</span></p><p class="c4 c5"><span class="c0"></span></p><a id="t.9c6de96dd0d5fbbbe0a5a140582734ec570813bf"></a><a id="t.5"></a><table class="c1"><tbody><tr class="c16"><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Row 1</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">3</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">8</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">9</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c7"><span class="c0">25</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">33</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">46</span></p></td></tr><tr class="c16"><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Row 2</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">15</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">22</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">36</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c7"><span class="c0">61</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">80</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">99</span></p></td></tr><tr class="c16"><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Row 3</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">22</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">39</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">59</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c7"><span class="c0">96</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">119</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">145 </span></p></td></tr><tr class="c16"><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Row 4</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">33</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">56</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">93</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c7"><span class="c0">134</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">164</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">208 </span></p></td></tr><tr class="c16"><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Row 5</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">41</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">78</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">122</span></p></td><td class="c14" colspan="1" rowspan="1"><p class="c7"><span class="c0">171</span></p></td><td class="c9 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">213</span></p></td><td class="c8 c26" colspan="1" rowspan="1"><p class="c7"><span class="c0">260</span></p></td></tr><tr class="c16"><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c15 c19">csum</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Col 1</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Col 2</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Col 3</span></p></td><td class="c28" colspan="1" rowspan="1"><p class="c7"><span class="c0">Col 4</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c7"><span class="c0">Col 5</span></p></td><td class="c8" colspan="1" rowspan="1"><p class="c7"><span class="c0">Col 6</span></p></td></tr></tbody></table><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c10">Let&rsquo;s now get back to the query part. Following is the </span><span class="c15">mat</span><span class="c0">&nbsp;matrix and we need the sum of the highlighted submatrix:</span></p><p class="c4 c5"><span class="c0"></span></p><a id="t.c36c8fcb263f51bf56d9c777d866004d9569673c"></a><a id="t.6"></a><table class="c1"><tbody><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 1</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">5</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">1</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">16</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">13</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 2</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">2</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">13</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">9</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">11</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 3</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">10</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">11</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">17</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">4</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">18</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 5</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">14</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c19 c15">mat</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 1</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 2</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 3</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 4</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 5</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 6</span></p></td></tr></tbody></table><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c10">The lower left of the submatrix is </span><span class="c15">(2, 3)</span><span class="c10">&nbsp;and the upper right cell is </span><span class="c15">(4, 5)</span><span class="c0">. We can get the sum of that submatrix by doing the following:</span></p><ul class="c22 lst-kix_n5uhzslew759-0 start"><li class="c4 c25 c6"><span class="c10">Firstly, get the cumulative sum of the submatrix </span><span class="c15">[(1, 1), (4, 5)]</span><span class="c10">&nbsp;which is </span><span class="c15">csum[4][5]</span><span class="c0">. </span></li><li class="c4 c25 c6"><span class="c10">Now, we need to subtract the sum of other cells from </span><span class="c15">csum[4][5]</span><span class="c10">&nbsp;that are not in the submatrix </span><span class="c15">[(2, 3), (4, 5)] </span><span class="c10">but in the submatrix </span><span class="c15">[(1, 1), (4, 5)]</span><span class="c0">. Let color the cells that need to be subtracted.</span></li></ul><p class="c4 c5"><span class="c0"></span></p><a id="t.c36c8fcb263f51bf56d9c777d866004d9569673c"></a><a id="t.7"></a><table class="c1"><tbody><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 1</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">5</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">1</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">16</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">13</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 2</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">2</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">13</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">9</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">11</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 3</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">10</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">4</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 4</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">11</span></p></td><td class="c9 c23" colspan="1" rowspan="1"><p class="c11"><span class="c0">6</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">17</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">4</span></p></td><td class="c9 c21" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">18</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Row 5</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">14</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">7</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">8</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">12</span></p></td><td class="c2" colspan="1" rowspan="1"><p class="c11"><span class="c0">3</span></p></td></tr><tr class="c16"><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c19 c15">mat</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 1</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 2</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 3</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 4</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 5</span></p></td><td class="c9" colspan="1" rowspan="1"><p class="c11"><span class="c0">Col 6</span></p></td></tr></tbody></table><p class="c4 c6"><span class="c0">&nbsp;</span></p><ul class="c22 lst-kix_myv07ux4t6p6-0 start"><li class="c4 c25 c6"><span class="c10">We will subtract </span><span class="c15">csum[4, 2]</span><span class="c0">&nbsp;so that the sum of cells (1, 1), (1, 2), (2, 1), (2, 2), (3, 1), (3, 2), (4, 1) and (1, 2) are subtracted.</span></li></ul><p class="c4 c6 c5"><span class="c0"></span></p><ul class="c22 lst-kix_vwd2mv7iyrt2-0 start"><li class="c4 c6 c25"><span class="c10">Then we will subtract </span><span class="c15">csum[1, 5]</span><span class="c0">&nbsp;so that the sum of cells (1, 1), (1, 2), (1, 3), (1, 4) and (1, 5) are subtracted.</span></li></ul><p class="c4 c6 c5"><span class="c0"></span></p><ul class="c22 lst-kix_owzttj1rbxkx-0 start"><li class="c4 c25 c6"><span class="c10">As we see the sum of cells (1, 1) and (1, 2) is subtracted twice, we will now add them again so that every cell is subtracted only one. We can add them by adding </span><span class="c15">csum[1, 2]</span><span class="c0">.</span></li></ul><p class="c4 c5 c6"><span class="c0"></span></p><p class="c4"><span class="c10">We got it! The sum of submatr</span><span class="c15">ix [(2, 3), (4, 5)] = csum[4][5] - csum[4][2] - csum[1][5] + csum[1][2] = 164 - 56 - 33 + 8 = 83</span></p><p class="c4"><span class="c10">So if (x1, y1) is lower left cell and (x2, y2) is the upper right of the submatrix, the sum of that submatrix is equal to </span><span class="c30">csum[x2][y2] - csum[x2][y1 - 1] - csum[x1 - 1][y2] + csum[x1 - 1][y1 - 1]</span><span class="c0">.</span></p><p class="c4 c5"><span class="c0"></span></p><p class="c4"><span class="c0">Here is the final code:<br></span></p><a id="t.e51443a4af162a6b863c99e124178fdf294d8dae"></a><a id="t.8"></a><table class="c1"><tbody><tr class="c16"><td class="c12" colspan="1" rowspan="1"><p class="c34"><span class="c20 c27">#include &lt;bits/stdc++.h&gt;</span><span class="c13"><br></span><span class="c18">using</span><span class="c13">&nbsp;</span><span class="c18">namespace</span><span class="c13">&nbsp;</span><span class="c20 c24">std</span><span class="c13">;<br><br></span><span class="c18">typedef</span><span class="c13">&nbsp;</span><span class="c18">long</span><span class="c13">&nbsp;</span><span class="c18">long</span><span class="c13">&nbsp;</span><span class="c18">int</span><span class="c13">&nbsp;ll;<br></span><span class="c18">typedef</span><span class="c13">&nbsp;pair&lt;ll, ll&gt; pll;<br><br></span><span class="c18">const</span><span class="c13">&nbsp;</span><span class="c18">int</span><span class="c13">&nbsp;Max = </span><span class="c17">2e3</span><span class="c13">&nbsp;+ </span><span class="c17">10</span><span class="c13">;<br></span><span class="c18">const</span><span class="c13">&nbsp;</span><span class="c18">int</span><span class="c13">&nbsp;Mod = </span><span class="c17">1e9</span><span class="c13">&nbsp;+ </span><span class="c17">7</span><span class="c13">;<br></span><span class="c18">const</span><span class="c13">&nbsp;ll Inf = </span><span class="c17">1L</span><span class="c13">L &lt;&lt; </span><span class="c17">62</span><span class="c13">;<br><br></span><span class="c18">int</span><span class="c13">&nbsp;mat[Max][Max];<br></span><span class="c18">int</span><span class="c13">&nbsp;csum[Max][Max];<br><br></span><span class="c18">void</span><span class="c13">&nbsp;</span><span class="c20 c24">calc</span><span class="c13">(</span><span class="c18">int</span><span class="c13">&nbsp;n, </span><span class="c18">int</span><span class="c13">&nbsp;m) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">for</span><span class="c13">&nbsp;(</span><span class="c18">int</span><span class="c13">&nbsp;i = </span><span class="c17">1</span><span class="c13">; i &lt;= n; i++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">for</span><span class="c13">&nbsp;(</span><span class="c18">int</span><span class="c13">&nbsp;j = </span><span class="c17">1</span><span class="c13">; j &lt;= m; j++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;csum[i][j] = mat[i][j] + csum[i - </span><span class="c17">1</span><span class="c13">][j] + csum[i][j - </span><span class="c17">1</span><span class="c13">] - csum[i - </span><span class="c17">1</span><span class="c13">][j - </span><span class="c17">1</span><span class="c13">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br></span><span class="c18">int</span><span class="c13">&nbsp;</span><span class="c20 c24">query</span><span class="c13">(</span><span class="c18">int</span><span class="c13">&nbsp;x1, </span><span class="c18">int</span><span class="c13">&nbsp;y1, </span><span class="c18">int</span><span class="c13">&nbsp;x2, </span><span class="c18">int</span><span class="c13">&nbsp;y2) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">return</span><span class="c13">&nbsp;csum[x2][y2] - csum[x2][y1 - </span><span class="c17">1</span><span class="c13">] - csum[x1 - </span><span class="c17">1</span><span class="c13">][y2] + csum[x1 - </span><span class="c17">1</span><span class="c13">][y1 - </span><span class="c17">1</span><span class="c13">];<br>}<br><br></span><span class="c18">int</span><span class="c13">&nbsp;</span><span class="c20 c24">main</span><span class="c13">(</span><span class="c18">int</span><span class="c13">&nbsp;argc, </span><span class="c18">char</span><span class="c13">&nbsp;</span><span class="c18">const</span><span class="c13">&nbsp;*argv[]) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">int</span><span class="c13">&nbsp;n, m, q, x1, y1, x2, y2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c20 c24">cin</span><span class="c13">&nbsp;&gt;&gt; n &gt;&gt; m &gt;&gt; q;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">for</span><span class="c13">&nbsp;(</span><span class="c18">int</span><span class="c13">&nbsp;i = </span><span class="c17">1</span><span class="c13">; i &lt;= n; i++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">for</span><span class="c13">&nbsp;(</span><span class="c18">int</span><span class="c13">&nbsp;j = </span><span class="c17">1</span><span class="c13">; j &lt;= m; j++) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c20 c24">cin</span><span class="c13">&nbsp;&gt;&gt; mat[i][j];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calc(n, m);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">while</span><span class="c13">&nbsp;(q--) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c20 c24">cin</span><span class="c13">&nbsp;&gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c20 c24">cout</span><span class="c13">&nbsp;&lt;&lt; query(x1, y1, x2, y2) &lt;&lt; </span><span class="c20 c24">endl</span><span class="c13">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c18">return</span><span class="c13">&nbsp;</span><span class="c17">0</span><span class="c13">;<br>}</span></p></td></tr></tbody></table><p class="c4 c5"><span class="c0"></span></p>
  </div>

  <footer class="footer" >
    <div class="container">
      <a style="float: right; margin-top: 12px; text-decoration: none;" href="mailto:emrul.chy@gmail.com" class="btn btn-social-icon btn-email"><span class="fa fa-envelope"></span></a>
      <a style="float: right; margin-top: 12px; text-decoration: none;" target="_blank" href="https://github.com/emrul-chy" class="btn btn-social-icon btn-github"><span class="fa fa-github"></span></a>
      <a style="float: right; margin-top: 12px; text-decoration: none;" target="_blank" href="https://www.linkedin.com/in/emrul-cse/" class="btn btn-social-icon btn-linkedin"><span class="fa fa-linkedin"></span></a>
      <a style="float: right; margin-top: 12px; text-decoration: none;" target="_blank" href="https://www.facebook.com/emrul.cse" class="btn btn-social-icon btn-facebook"><span class="fa fa-facebook"></span></a>
      <span class="text-muted">  2020 emrul-chy.github.io | By Md. Emrul Chowdhury</i><span>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
</body>

</html>
