<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
  <link rel="stylesheet" href="../css/style.css">
  <title>Preprocess to update-query in Subtree | Tutorials</title>

  <link rel='shortcut icon' href='../images/favicon.ico' type='image/x-icon' />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono&display=swap" rel="stylesheet">

   <style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=mW_CIZvkcW1i7Mw9mVo5P1H3VBSNBU7eRH25QrkZQSALcGubaB9yiiHAdd9ZEf4N');ul.lst-kix_owzttj1rbxkx-7{list-style-type:none}ul.lst-kix_owzttj1rbxkx-8{list-style-type:none}ul.lst-kix_owzttj1rbxkx-5{list-style-type:none}ul.lst-kix_owzttj1rbxkx-6{list-style-type:none}ul.lst-kix_pg0jxf7amv8s-1{list-style-type:none}ul.lst-kix_pg0jxf7amv8s-0{list-style-type:none}ul.lst-kix_pg0jxf7amv8s-3{list-style-type:none}ul.lst-kix_pg0jxf7amv8s-2{list-style-type:none}.lst-kix_neiex2moh3dh-2>li:before{content:"\0025a0  "}.lst-kix_neiex2moh3dh-3>li:before{content:"\0025cf  "}.lst-kix_neiex2moh3dh-4>li:before{content:"\0025cb  "}ul.lst-kix_pg0jxf7amv8s-5{list-style-type:none}.lst-kix_neiex2moh3dh-1>li:before{content:"\0025cb  "}ul.lst-kix_pg0jxf7amv8s-4{list-style-type:none}ul.lst-kix_pg0jxf7amv8s-7{list-style-type:none}ul.lst-kix_pg0jxf7amv8s-6{list-style-type:none}.lst-kix_neiex2moh3dh-0>li:before{content:"\0025cf  "}ul.lst-kix_pg0jxf7amv8s-8{list-style-type:none}ul.lst-kix_n5uhzslew759-0{list-style-type:none}.lst-kix_pg0jxf7amv8s-3>li:before{content:"\0025cf  "}ul.lst-kix_n5uhzslew759-2{list-style-type:none}.lst-kix_pg0jxf7amv8s-4>li:before{content:"\0025cb  "}ul.lst-kix_n5uhzslew759-1{list-style-type:none}ul.lst-kix_owzttj1rbxkx-0{list-style-type:none}ul.lst-kix_n5uhzslew759-4{list-style-type:none}ul.lst-kix_n5uhzslew759-3{list-style-type:none}ul.lst-kix_n5uhzslew759-6{list-style-type:none}.lst-kix_pg0jxf7amv8s-6>li:before{content:"\0025cf  "}ul.lst-kix_owzttj1rbxkx-3{list-style-type:none}ul.lst-kix_n5uhzslew759-5{list-style-type:none}ul.lst-kix_owzttj1rbxkx-4{list-style-type:none}ul.lst-kix_n5uhzslew759-8{list-style-type:none}.lst-kix_pg0jxf7amv8s-5>li:before{content:"\0025a0  "}ul.lst-kix_owzttj1rbxkx-1{list-style-type:none}ul.lst-kix_n5uhzslew759-7{list-style-type:none}ul.lst-kix_owzttj1rbxkx-2{list-style-type:none}.lst-kix_vwd2mv7iyrt2-1>li:before{content:"\0025cb  "}.lst-kix_vwd2mv7iyrt2-3>li:before{content:"\0025cf  "}.lst-kix_g6t4hrpx5fu6-4>li:before{content:"\0025cb  "}.lst-kix_g6t4hrpx5fu6-6>li:before{content:"\0025cf  "}.lst-kix_vwd2mv7iyrt2-2>li:before{content:"\0025a0  "}.lst-kix_g6t4hrpx5fu6-3>li:before{content:"\0025cf  "}.lst-kix_g6t4hrpx5fu6-7>li:before{content:"\0025cb  "}.lst-kix_n5uhzslew759-0>li:before{content:"\0025cf  "}.lst-kix_n5uhzslew759-1>li:before{content:"\0025cb  "}.lst-kix_vwd2mv7iyrt2-5>li:before{content:"\0025a0  "}.lst-kix_n5uhzslew759-2>li:before{content:"\0025a0  "}.lst-kix_pg0jxf7amv8s-2>li:before{content:"\0025a0  "}.lst-kix_tsnhjxcqfiw3-8>li:before{content:"\0025a0  "}.lst-kix_pg0jxf7amv8s-1>li:before{content:"\0025cb  "}.lst-kix_vwd2mv7iyrt2-4>li:before{content:"\0025cb  "}.lst-kix_g6t4hrpx5fu6-5>li:before{content:"\0025a0  "}.lst-kix_n5uhzslew759-4>li:before{content:"\0025cb  "}.lst-kix_pg0jxf7amv8s-0>li:before{content:"\0025cf  "}.lst-kix_n5uhzslew759-3>li:before{content:"\0025cf  "}.lst-kix_n5uhzslew759-5>li:before{content:"\0025a0  "}ul.lst-kix_neiex2moh3dh-1{list-style-type:none}ul.lst-kix_neiex2moh3dh-2{list-style-type:none}ul.lst-kix_neiex2moh3dh-0{list-style-type:none}.lst-kix_n5uhzslew759-7>li:before{content:"\0025cb  "}.lst-kix_g6t4hrpx5fu6-8>li:before{content:"\0025a0  "}.lst-kix_myv07ux4t6p6-8>li:before{content:"\0025a0  "}.lst-kix_n5uhzslew759-6>li:before{content:"\0025cf  "}.lst-kix_vwd2mv7iyrt2-0>li:before{content:"\0025cf  "}ul.lst-kix_tsnhjxcqfiw3-4{list-style-type:none}ul.lst-kix_tsnhjxcqfiw3-3{list-style-type:none}ul.lst-kix_tsnhjxcqfiw3-2{list-style-type:none}ul.lst-kix_tsnhjxcqfiw3-1{list-style-type:none}ul.lst-kix_tsnhjxcqfiw3-0{list-style-type:none}.lst-kix_n5uhzslew759-8>li:before{content:"\0025a0  "}ul.lst-kix_neiex2moh3dh-5{list-style-type:none}ul.lst-kix_neiex2moh3dh-6{list-style-type:none}ul.lst-kix_neiex2moh3dh-3{list-style-type:none}ul.lst-kix_neiex2moh3dh-4{list-style-type:none}ul.lst-kix_tsnhjxcqfiw3-8{list-style-type:none}ul.lst-kix_tsnhjxcqfiw3-7{list-style-type:none}ul.lst-kix_neiex2moh3dh-7{list-style-type:none}ul.lst-kix_tsnhjxcqfiw3-6{list-style-type:none}ul.lst-kix_neiex2moh3dh-8{list-style-type:none}ul.lst-kix_tsnhjxcqfiw3-5{list-style-type:none}.lst-kix_g6t4hrpx5fu6-0>li:before{content:"\0025cf  "}.lst-kix_vwd2mv7iyrt2-6>li:before{content:"\0025cf  "}.lst-kix_vwd2mv7iyrt2-7>li:before{content:"\0025cb  "}.lst-kix_g6t4hrpx5fu6-2>li:before{content:"\0025a0  "}.lst-kix_vwd2mv7iyrt2-8>li:before{content:"\0025a0  "}.lst-kix_g6t4hrpx5fu6-1>li:before{content:"\0025cb  "}ul.lst-kix_g6t4hrpx5fu6-4{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-5{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-2{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-3{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-0{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-1{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-8{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-6{list-style-type:none}ul.lst-kix_g6t4hrpx5fu6-7{list-style-type:none}.lst-kix_owzttj1rbxkx-3>li:before{content:"\0025cf  "}.lst-kix_owzttj1rbxkx-1>li:before{content:"\0025cb  "}.lst-kix_owzttj1rbxkx-2>li:before{content:"\0025a0  "}.lst-kix_owzttj1rbxkx-0>li:before{content:"\0025cf  "}.lst-kix_myv07ux4t6p6-7>li:before{content:"\0025cb  "}.lst-kix_tsnhjxcqfiw3-1>li:before{content:"\0025cb  "}.lst-kix_tsnhjxcqfiw3-2>li:before{content:"\0025a0  "}.lst-kix_myv07ux4t6p6-6>li:before{content:"\0025cf  "}.lst-kix_tsnhjxcqfiw3-0>li:before{content:"\0025cf  "}.lst-kix_myv07ux4t6p6-5>li:before{content:"\0025a0  "}.lst-kix_tsnhjxcqfiw3-5>li:before{content:"\0025a0  "}.lst-kix_tsnhjxcqfiw3-6>li:before{content:"\0025cf  "}.lst-kix_myv07ux4t6p6-2>li:before{content:"\0025a0  "}.lst-kix_myv07ux4t6p6-4>li:before{content:"\0025cb  "}.lst-kix_tsnhjxcqfiw3-3>li:before{content:"\0025cf  "}.lst-kix_tsnhjxcqfiw3-7>li:before{content:"\0025cb  "}.lst-kix_myv07ux4t6p6-3>li:before{content:"\0025cf  "}.lst-kix_myv07ux4t6p6-0>li:before{content:"\0025cf  "}.lst-kix_tsnhjxcqfiw3-4>li:before{content:"\0025cb  "}.lst-kix_myv07ux4t6p6-1>li:before{content:"\0025cb  "}ul.lst-kix_vwd2mv7iyrt2-8{list-style-type:none}.lst-kix_pg0jxf7amv8s-8>li:before{content:"\0025a0  "}.lst-kix_pg0jxf7amv8s-7>li:before{content:"\0025cb  "}ul.lst-kix_vwd2mv7iyrt2-0{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-1{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-2{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-3{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-4{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-5{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-6{list-style-type:none}ul.lst-kix_vwd2mv7iyrt2-7{list-style-type:none}ul.lst-kix_myv07ux4t6p6-7{list-style-type:none}.lst-kix_neiex2moh3dh-5>li:before{content:"\0025a0  "}.lst-kix_neiex2moh3dh-6>li:before{content:"\0025cf  "}ul.lst-kix_myv07ux4t6p6-8{list-style-type:none}ul.lst-kix_myv07ux4t6p6-5{list-style-type:none}.lst-kix_owzttj1rbxkx-4>li:before{content:"\0025cb  "}ul.lst-kix_myv07ux4t6p6-6{list-style-type:none}ul.lst-kix_myv07ux4t6p6-3{list-style-type:none}.lst-kix_owzttj1rbxkx-5>li:before{content:"\0025a0  "}ul.lst-kix_myv07ux4t6p6-4{list-style-type:none}ul.lst-kix_myv07ux4t6p6-1{list-style-type:none}ul.lst-kix_myv07ux4t6p6-2{list-style-type:none}.lst-kix_owzttj1rbxkx-7>li:before{content:"\0025cb  "}ul.lst-kix_myv07ux4t6p6-0{list-style-type:none}.lst-kix_owzttj1rbxkx-6>li:before{content:"\0025cf  "}.lst-kix_owzttj1rbxkx-8>li:before{content:"\0025a0  "}.lst-kix_neiex2moh3dh-7>li:before{content:"\0025cb  "}.lst-kix_neiex2moh3dh-8>li:before{content:"\0025a0  "}ol{margin:0;padding:0}table td,table th{padding:0}.c8{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#b6d7a8;border-left-style:solid;border-bottom-width:1pt;width:135.4pt;border-top-color:#000000;border-bottom-style:solid}.c10{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#ffd966;border-left-style:solid;border-bottom-width:1pt;width:45.1pt;border-top-color:#000000;border-bottom-style:solid}.c0{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#ffe599;border-left-style:solid;border-bottom-width:1pt;width:45.1pt;border-top-color:#000000;border-bottom-style:solid}.c7{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#b6d7a8;border-left-style:solid;border-bottom-width:1pt;width:45.1pt;border-top-color:#000000;border-bottom-style:solid}.c23{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:451.3pt;border-top-color:#000000;border-bottom-style:solid}.c11{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:45.1pt;border-top-color:#000000;border-bottom-style:solid}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Ubuntu Mono";font-style:normal}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Ubuntu";font-style:normal}.c21{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Ubuntu";font-style:normal}.c5{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Ubuntu";font-style:italic}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left;height:11pt}.c25{background-color:#333333;font-size:12pt;font-family:"Ubuntu Mono";color:#ffffff;font-weight:400}.c17{background-color:#333333;font-size:12pt;font-family:"Ubuntu Mono";color:#d36363;font-weight:400}.c22{background-color:#333333;font-size:12pt;font-family:"Ubuntu Mono";color:#ffffaa;font-weight:400}.c4{background-color:#333333;font-size:12pt;font-family:"Ubuntu Mono";color:#fcc28c;font-weight:400}.c18{font-size:12pt;font-family:"Ubuntu";font-style:italic;font-weight:400}.c16{border-spacing:0;border-collapse:collapse;margin-right:auto}.c26{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c24{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c6{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c20{font-size:12pt;font-family:"Ubuntu";font-weight:400}.c27{font-weight:700;font-size:12pt;font-family:"Arial"}.c31{font-size:13pt;font-family:"Ubuntu";font-weight:700}.c32{font-weight:400;font-size:13pt;font-family:"Ubuntu"}.c15{font-size:12pt;font-family:"Ubuntu";font-weight:700}.c29{background-color:#ffffff;max-width:451.3pt;padding:72pt 72pt 72pt 72pt}.c28{padding:0;margin:0}.c12{margin-left:36pt;padding-left:0pt}.c30{font-style:italic}.c13{height:0pt}.c19{height:11pt}.c33{margin-left:36pt}.c14{height:22pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style>
<nav class="navbar navbar-dark bg-dark navbar-expand-lg">
  <a class="navbar-brand" href="./index.html">Md. Emrul Chowdhury</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
    aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarText">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" href="../index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../competitive-programming-profile.html">Competitive Programming Profile</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../problem-setting-profile.html">Problem Setting Profile</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../career-background.html">Career Background</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../tools/index.html">Tools</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="index.html">Tutorials</a>
      </li>
    </ul>
  </div>
</nav>

<body style="position: relative; min-height: 100vh">

  <div class="container" style="margin-top: 20px; padding-bottom: 150px">
    <h3 style="font-family: Ubuntu; font-size: 28px; font-weight: bold;">Preprocess to update-query in Subtree</h3>
    <p class="c9"><span class="c24 c15">Prerequisites:</span></p><ul class="c28 lst-kix_tsnhjxcqfiw3-0 start"><li class="c9 c12"><span class="c3">Segment Tree</span></li><li class="c9 c12"><span class="c3">Depth First Search (DFS)</span></li></ul><p class="c9 c19 c33"><span class="c24 c32"></span></p><p class="c9"><span class="c24 c32">In this tutorial, we will learn how to preprocess a given tree to update a node and query in a subtree using a data structure like segment tree.</span></p><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c18">A subtree of a tree </span><span class="c15 c30">T</span><span class="c18">&nbsp;is a tree consisting of a node in </span><span class="c15 c30">T</span><span class="c18">&nbsp;and all of its descendants in </span><span class="c15 c30">T</span><span class="c5">.</span></p><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">We know there are well known data-structures to update and query in subarray of an array. We can use all of them to query in a subtree. Let&rsquo;s see how we&#39;ll do that!</span></p><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">Suppose we have a tree with 7 node and the tree looks like following:</span></p><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 392.00px; height: 392.00px;"><img alt="" src="images/image3.png" style="width: 392.00px; height: 392.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9"><span class="c3">Let&rsquo;s assume there is a value written in every node. For example, the numbers are as following:</span></p><p class="c9 c19"><span class="c3"></span></p><a id="t.68658c9d9f66d57f9c2b61abfd39a20e2a057f4d"></a><a id="t.0"></a><table class="c16"><tbody><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Node Number</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">1</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">4</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">7</span></p></td></tr><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Assigned Value</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">9</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">10 </span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">11</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">8</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">12</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td></tr></tbody></table><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">For example, a tree having node 2 as root is the subtree of the mentioned tree.</span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 392.00px; height: 392.00px;"><img alt="" src="images/image1.png" style="width: 392.00px; height: 392.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9"><span class="c20">So, for an example, if we want to get the maximum value among that subtree, we need to find the maximum value among the nodes </span><span class="c15">2</span><span class="c20">, </span><span class="c15">6</span><span class="c20">&nbsp;and </span><span class="c15">5</span><span class="c3">.</span></p><p class="c9 c19"><span class="c3"></span></p><a id="t.68658c9d9f66d57f9c2b61abfd39a20e2a057f4d"></a><a id="t.1"></a><table class="c16"><tbody><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Node Number</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">1</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c6"><span class="c3">2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">4</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">7</span></p></td></tr><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Assigned Value</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">9</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c6"><span class="c3">10 </span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">11</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c6"><span class="c3">8</span></p></td><td class="c10" colspan="1" rowspan="1"><p class="c6"><span class="c3">12</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td></tr></tbody></table><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">As we are seeing, these node indexes do not build a segment, we are not able to use data-structures to find the maximum efficiently.<br><br>But there is a solution, let&rsquo;s traverse the tree by dfs fashion and write the traversal order on these nodes.</span></p><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 368.00px; height: 368.00px;"><img alt="" src="images/image2.png" style="width: 368.00px; height: 368.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c9 c19"><span class="c3"></span></p><a id="t.1b3eaf2caca95a0f34a227f5018be284cca13500"></a><a id="t.2"></a><table class="c16"><tbody><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Traversal Order</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">1</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">4</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">7</span></p></td></tr><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Node Number</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">1</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">4</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">7</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td></tr><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Assigned Value</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">9</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">11</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">10</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">12</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">8</span></p></td></tr></tbody></table><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">Now back to the query part, the candidate nodes of the query are highlighted as follows:</span></p><p class="c9 c19"><span class="c3"></span></p><a id="t.baacb2106ebe0a2b4cef1fcdd4e048966eabebb9"></a><a id="t.3"></a><table class="c16"><tbody><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Traversal Order</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">1</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">2</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">4</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">7</span></p></td></tr><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Node Number</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">1</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">3</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">4</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">7</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">2</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td></tr><tr class="c14"><td class="c8" colspan="3" rowspan="1"><p class="c6"><span class="c3">Assigned Value</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">9</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">11</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">6</span></p></td><td class="c11" colspan="1" rowspan="1"><p class="c6"><span class="c3">5</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">10</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">12</span></p></td><td class="c0" colspan="1" rowspan="1"><p class="c6"><span class="c3">8</span></p></td></tr></tbody></table><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">Now we can see, the traversal order of these nodes form a segment and we can easily apply data-structure like segment tree to find the maximum of that subtree having node 2 as root.<br><br>The formula to get traversal order range for a subtree is</span></p><ul class="c28 lst-kix_pg0jxf7amv8s-0 start"><li class="c9 c12"><span class="c21">Left most traversal order = Traversal order of subtree node</span></li><li class="c9 c12"><span class="c31">Right most traversal order = Traversal order of subtree node</span><span class="c15 c24">&nbsp;+ Size of the subtree - 1</span></li></ul><p class="c9 c19"><span class="c24 c27"></span></p><p class="c9"><span class="c15">Explanation:</span><span class="c3">&nbsp;If we go back to our example subtree, the left traversal order of the highlighted segment is 5, which is the traversal order of node 2, which is the root of the subtree. And as the right traversal order will be the last node of that subtree. This can be easily found by adding subtree size. </span></p><p class="c9 c19"><span class="c24 c27"></span></p><p class="c9"><span class="c3">How we can traverse the tree in dfs fashion and finding subtree size related code are as follows:</span></p><p class="c9 c19"><span class="c3"></span></p><a id="t.343bdbe9559f7ce02a8a4f8e795253e64f26e9ae"></a><a id="t.4"></a><table class="c16"><tbody><tr class="c13"><td class="c23" colspan="1" rowspan="1"><p class="c26"><span class="c4">int</span><span class="c25">&nbsp;traversalOrder = </span><span class="c17">0</span><span class="c25">;<br></span><span class="c4">int</span><span class="c25">&nbsp;sz[Max];<br></span><span class="c4">int</span><span class="c25">&nbsp;order[Max];<br></span><span class="c22">vector</span><span class="c25">&lt;</span><span class="c4">int</span><span class="c25">&gt; adj[Max];<br><br></span><span class="c4">int</span><span class="c25">&nbsp;</span><span class="c22">dfs</span><span class="c25">(</span><span class="c4">int</span><span class="c25">&nbsp;u) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order[u] = ++traversalOrder;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sz[u] = </span><span class="c17">1</span><span class="c25">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">for</span><span class="c25">(</span><span class="c4">int</span><span class="c25">&nbsp;v : adj[u]) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">if</span><span class="c25">&nbsp;(!order[v]) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sz[u] += dfs(v);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">return</span><span class="c25">&nbsp;sz[u];<br>}</span></p></td></tr></tbody></table><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">And getting traversal order range for a subtree is as like follows:</span></p><p class="c9 c19"><span class="c3"></span></p><a id="t.1fb3df6cd596d750360b3c882fe814014e96453a"></a><a id="t.5"></a><table class="c16"><tbody><tr class="c13"><td class="c23" colspan="1" rowspan="1"><p class="c26"><span class="c25">pair&lt;</span><span class="c4">int</span><span class="c25">, </span><span class="c4">int</span><span class="c25">&gt; getRange(</span><span class="c4">int</span><span class="c25">&nbsp;root) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">int</span><span class="c25">&nbsp;rootTraversalOrder = order[root];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">int</span><span class="c25">&nbsp;l = rootTraversalOrder;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">int</span><span class="c25">&nbsp;r = rootTraversalOrder + sz[root] - </span><span class="c17">1</span><span class="c25">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4">return</span><span class="c25">&nbsp;{l, r};<br>}</span></p></td></tr></tbody></table><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">Now we can update a node and query over a subtree using a data structure like segment tree.</span></p><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c3">Thank you for your reading. :D </span></p><p class="c9 c19"><span class="c3"></span></p><p class="c9"><span class="c15">Published on 05 December, 2020</span></p>
  </div>

  <footer class="footer" >
    <div class="container">
      <a style="float: right; margin-top: 12px; text-decoration: none;" href="mailto:emrul.chy@gmail.com" class="btn btn-social-icon btn-email"><span class="fa fa-envelope"></span></a>
      <a style="float: right; margin-top: 12px; text-decoration: none;" target="_blank" href="https://github.com/emrul-chy" class="btn btn-social-icon btn-github"><span class="fa fa-github"></span></a>
      <a style="float: right; margin-top: 12px; text-decoration: none;" target="_blank" href="https://www.linkedin.com/in/emrul-cse/" class="btn btn-social-icon btn-linkedin"><span class="fa fa-linkedin"></span></a>
      <a style="float: right; margin-top: 12px; text-decoration: none;" target="_blank" href="https://www.facebook.com/emrul.cse" class="btn btn-social-icon btn-facebook"><span class="fa fa-facebook"></span></a>
      <span class="text-muted"> Ⓒ 2020 emrul-chy.github.io | By Md. Emrul Chowdhury</i><span>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
</body>

</html>
